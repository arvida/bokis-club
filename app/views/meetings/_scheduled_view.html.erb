<%# Mobile-first hero: stacked on mobile, side-by-side on larger screens %>
<div class="px-2 sm:px-6 pt-6 pb-8">
  <div class="mb-6">
    <%= render "shared/back_link", path: club_path(club) %>
  </div>

  <%# Book cover - centered hero on mobile, side element on desktop %>
  <% if meeting.club_book&.book %>
    <div class="flex justify-center mb-8 md:hidden">
      <%= link_to club_club_book_path(club, meeting.club_book), class: "block w-32 group" do %>
        <div class="relative">
          <%= render "shared/book_cover", book: meeting.club_book.book, size: :large,
              class: "w-full rounded shadow-2xl group-active:scale-95 transition-transform duration-150" %>
        </div>
      <% end %>
    </div>
  <% end %>

  <div class="flex gap-8">
    <%# Desktop book cover %>
    <% if meeting.club_book&.book %>
      <%= link_to club_club_book_path(club, meeting.club_book),
          class: "hidden md:block flex-shrink-0 w-40 group" do %>
        <div class="relative">
          <%= render "shared/book_cover", book: meeting.club_book.book, size: :large,
              class: "w-full rounded shadow-2xl group-hover:shadow-3xl transition-all duration-300 group-hover:-translate-y-1" %>
        </div>
      <% end %>
    <% end %>

    <div class="flex-1 text-center md:text-left">
      <%# Editorial date - dramatic on mobile %>
      <div class="mb-6">
        <span class="font-display text-7xl md:text-8xl font-light text-ink leading-none tracking-tight">
          <%= meeting.scheduled_at.day %>
        </span>
        <div class="mt-1">
          <span class="text-sm md:text-base font-medium tracking-widest text-ink-muted uppercase">
            <%= I18n.l(meeting.scheduled_at, format: "%B %Y") %>
          </span>
        </div>
      </div>

      <%# Title %>
      <h1 class="font-display text-2xl md:text-3xl font-light text-ink mb-4 leading-snug">
        <%= meeting.title %>
      </h1>

      <%# Time badge %>
      <div class="inline-flex items-center gap-3 px-4 py-2 bg-cream/50 rounded-full mb-4">
        <span class="text-sm font-medium text-ink">
          <%= I18n.l(meeting.scheduled_at, format: "%H:%M") %>
          <% if meeting.ends_at %>
            <span class="text-ink-muted">â†’</span>
            <%= I18n.l(meeting.ends_at, format: "%H:%M") %>
          <% end %>
        </span>
      </div>

      <%# Location %>
      <% if meeting.location.present? %>
        <div class="flex items-center justify-center md:justify-start gap-2 text-ink-muted">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
            <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z" />
          </svg>
          <span class="text-sm"><%= meeting.location %></span>
          <% if meeting.maps_url %>
            <a href="<%= meeting.maps_url %>" target="_blank"
               class="ml-1 px-2 py-1 text-xs font-medium text-vermillion bg-vermillion/10 rounded-full hover:bg-vermillion/20 transition-colors">
              Karta
            </a>
          <% end %>
        </div>
      <% elsif meeting.location_type == "tbd" %>
        <p class="text-sm text-ink-subtle italic text-center md:text-left">
          <%= t("meetings.location.tbd") %>
        </p>
      <% end %>
    </div>
  </div>
</div>

<%# RSVP Section - full width with background %>
<div class="bg-paper-warm px-2 sm:px-6 py-6">
  <%= render "meetings/rsvp_pills", meeting: meeting, user_rsvp: user_rsvp, club: club %>
</div>

<%# Host %>
<% if meeting.host.present? %>
  <div class="px-2 sm:px-6 py-4 border-t border-cream flex items-center gap-3">
    <span class="text-xs font-medium tracking-widest text-ink-muted uppercase">
      <%= t("meetings.scheduled.host") %>
    </span>
    <div class="flex items-center gap-2">
      <div class="w-7 h-7 rounded-full bg-sage/20 flex items-center justify-center">
        <span class="text-xs font-medium text-sage"><%= meeting.host.name.first.upcase %></span>
      </div>
      <span class="text-sm font-medium text-ink"><%= meeting.host.name %></span>
    </div>
  </div>
<% end %>

<%# Attendees %>
<div class="px-2 sm:px-6 py-8 border-t border-cream">
  <%= render "meetings/attendees", meeting: meeting %>
</div>

<%# Preparation Section - Discussion Questions %>
<% if meeting.club_book&.book %>
  <div class="px-2 sm:px-6 py-8 border-t border-cream">
    <div class="flex items-center justify-between mb-4">
      <span class="text-xs font-medium tracking-widest text-vermillion uppercase">
        <%= t("meetings.scheduled.preparation") %>
      </span>
    </div>

    <p class="text-sm text-ink-muted mb-6">
      <%= t("meetings.scheduled.preparation_hint") %>
    </p>

    <%= render "meetings/discussion_guide_section", meeting: meeting, club: club %>
  </div>
<% end %>

<%# Notes %>
<% if meeting.notes.present? %>
  <div class="px-2 sm:px-6 py-8 border-t border-cream">
    <span class="inline-block text-xs font-medium tracking-widest text-vermillion uppercase mb-4">
      <%= t("meetings.show.notes") %>
    </span>
    <p class="text-ink-light leading-relaxed whitespace-pre-wrap"><%= meeting.notes %></p>
  </div>
<% end %>

<%# Actions - sticky on mobile for thumb reach %>
<div class="px-2 sm:px-6 py-6 border-t border-cream bg-paper sticky bottom-0 md:static md:bg-transparent">
  <div class="flex gap-3">
    <% if club.admin?(current_user) %>
      <%= button_to start_club_meeting_path(club, meeting),
          method: :post,
          class: "flex-1 inline-flex items-center justify-center gap-2 px-4 py-4 bg-sage text-white text-sm font-medium rounded-xl active:scale-[0.98] transition-transform" do %>
        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
          <path stroke-linecap="round" stroke-linejoin="round" d="M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z" />
        </svg>
        <%= t("meetings.show.start_meeting") %>
      <% end %>
    <% else %>
      <%= link_to calendar_club_meeting_path(club, meeting),
          class: "flex-1 inline-flex items-center justify-center gap-2 px-4 py-4 bg-vermillion text-white text-sm font-medium rounded-xl active:scale-[0.98] transition-transform" do %>
        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5" />
        </svg>
        <%= t("meetings.show.calendar") %>
      <% end %>
    <% end %>

    <% if club.admin?(current_user) %>
      <%= link_to edit_club_meeting_path(club, meeting),
          class: "px-4 py-4 border-2 border-cream text-ink-muted rounded-xl active:scale-[0.98] transition-transform hover:border-ink-muted hover:text-ink" do %>
        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
          <path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125" />
        </svg>
      <% end %>
    <% end %>
  </div>
</div>
