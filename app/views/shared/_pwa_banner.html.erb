<%# Show banner when in browser (not standalone PWA) suggesting to open the app %>
<div id="pwa-open-banner" class="hidden bg-sage text-white px-4 py-3">
  <div class="max-w-4xl mx-auto flex items-center justify-between gap-4">
    <div class="flex items-center gap-3">
      <span class="text-lg">ðŸ“±</span>
      <span class="text-sm font-medium"><%= t("pwa.open_in_app") %></span>
    </div>
    <button type="button" onclick="dismissPwaBanner()" class="text-white/70 hover:text-white p-1" aria-label="<%= t("pwa.dismiss") %>">
      <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
      </svg>
    </button>
  </div>
</div>

<script>
  (function() {
    // Check if running as installed PWA (standalone mode)
    const isStandalone = window.matchMedia('(display-mode: standalone)').matches ||
                         window.navigator.standalone === true;

    // Check if user dismissed the banner this session
    const isDismissed = sessionStorage.getItem('pwa-banner-dismissed');

    // Show banner only if in browser (not standalone) and not dismissed
    if (!isStandalone && !isDismissed) {
      document.getElementById('pwa-open-banner').classList.remove('hidden');
    }
  })();

  function dismissPwaBanner() {
    document.getElementById('pwa-open-banner').classList.add('hidden');
    sessionStorage.setItem('pwa-banner-dismissed', 'true');
  }
</script>
