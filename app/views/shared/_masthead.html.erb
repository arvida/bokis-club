<header class="fixed top-0 left-0 right-0 z-40 bg-paper border-b border-cream">
  <div class="max-w-4xl mx-auto px-4 sm:px-6 h-14 flex items-center justify-between">
    <%= link_to root_path, class: "font-display text-2xl font-light italic text-ink hover:text-vermillion transition-colors" do %>
      Bokis
    <% end %>

    <% if signed_in? %>
      <div class="relative" data-controller="dropdown">
        <button type="button"
                data-action="click->dropdown#toggle"
                class="flex items-center gap-2 hover:opacity-80 transition-opacity"
                aria-haspopup="true"
                aria-expanded="false"
                data-dropdown-target="button">
          <span class="w-8 h-8 rounded-full bg-sage text-white flex items-center justify-center text-sm font-medium">
            <%= current_user.initials %>
          </span>
        </button>

        <nav data-dropdown-target="menu"
             class="hidden absolute right-0 top-full mt-2 w-48 bg-paper rounded-lg shadow-lg border border-cream py-1"
             role="menu">
          <div class="px-4 py-2 border-b border-cream">
            <p class="font-medium text-ink truncate"><%= current_user.name %></p>
            <p class="text-sm text-ink-muted truncate"><%= current_user.email %></p>
          </div>
          <%= link_to "Profil", profile_path, class: "block px-4 py-2 text-ink hover:bg-paper-warm transition-colors", role: "menuitem" %>
          <%= button_to "Logga ut", logout_path, method: :delete, class: "w-full text-left px-4 py-2 text-ink hover:bg-paper-warm transition-colors", role: "menuitem" %>
        </nav>
      </div>
    <% else %>
      <%= link_to "Logga in", login_path, class: "text-ink hover:text-vermillion transition-colors" %>
    <% end %>
  </div>
</header>
